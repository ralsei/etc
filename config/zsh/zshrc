## ^ THE ABOVE IS AUTO-GENERATED!
## hazel's zsh config

. ~/.zprivate

## CHRIST
[[ "$TERM" == "dumb" ]] && unsetopt zle && PS1='fuck you $ ' && return

## PATH
typeset -gU cdpath fpath mailpath path

path=(
    $path
    ~/bin
    ~/.local/bin
    ~/.emacs.d/bin
    ~/.cargo/bin
    ~/.cabal/bin
    ~/.go/bin
    /opt/texlive/2020/bin/x86_64-linux
)

## HISTORY
setopt HIST_IGNORE_ALL_DUPS

## I/O
# vim mode
bindkey -v

# remove path separator from WORDCHARS
WORDCHARS=${WORDCHARS//[\/]}

## ZR
zrinit() {
    zr load zdharma/fast-syntax-highlighting \
            geometry-zsh/geometry > ~/.config/zr.zsh
}

if [[ ! -f ~/.config/zr.zsh ]] || [[ ~/.zshrc -nt ~/.config/zr.zsh ]]; then
    zrinit
fi

source ~/.config/zr.zsh

## PLUGINS
ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets)

PROMPT_TITLE="$USER@$HOST: $PWD"

GEOMETRY_PROMPT=(geometry_status geometry_path)
GEOMETRY_RPROMPT=(geometry_exitcode geometry_git)
GEOMETRY_SEPARATOR=" "

GEOMETRY_STATUS_SYMBOL="λ"
GEOMETRY_STATUS_SYMBOL_ERROR="λ"
GEOMETRY_STATUS_COLOR_ERROR="red"
GEOMETRY_STATUS_COLOR="11"
GEOMETRY_STATUS_COLOR_ROOT="red"

GEOMETRY_PATH_COLOR="green"

## ENVIRONMENT
export WINIT_HIDPI_FACTOR=1.0

### dircolors
test -r ~/.config/dir_colors && eval $(dircolors ~/.config/dir_colors)

### browser
export BROWSER='firefox'

### code
export CC=clang
export CXX=clang++
export GOPATH=~/.go
export XBPS_DISTDIR=~/var/packages
export RUST_SRC_PATH="$(rustc --print sysroot)/lib/rustlib/src/rust/src"
export BUNDLE_PATH=~/.gems
export GEM_HOME=~/.gems

### tex
export TEXMFHOME=~/.texmf
export TEXMFVAR=~/.texmf-var
export TEXMFCONFIG=~/.texmf-config

### editors
export EDITOR='emacsclient -c'
export VISUAL='emacsclient -c'
export PAGER='less'

### lang
if [[ -z "$LANG" ]]; then
    export LANG='en_US.UTF-8'
fi

### xdg config
export XDG_CONFIG_HOME=~/.config

### pager
export LESS='-F -g -i -M -R -S -w -X -z-4'

if (( $#commands[(i)lesspipe(|.sh)] )); then
    export LESSOPEN="| /usr/bin/env $commands[(i)lesspipe(|.sh)] %s 2>&-"
fi

### temp
if [[ ! -d "$TMPDIR" ]]; then
    export TMPDIR="/tmp/$LOGNAME"
    mkdir -p -m 700 "$TMPDIR"
fi

TMPPREFIX="${TMPDIR%/}/zsh"

### nq
export NQDIR=~/var/queue

## FUNCTIONS
function man() {
    env \
        LESS_TERMCAP_md=$(tput bold; tput setaf 4) \
        LESS_TERMCAP_me=$(tput sgr0) \
        LESS_TERMCAP_mb=$(tput blink) \
        LESS_TERMCAP_us=$(tput setaf 2) \
        LESS_TERMCAP_ue=$(tput sgr0) \
        LESS_TERMCAP_so=$(tput smso) \
        LESS_TERMCAP_se=$(tput rmso) \
        PAGER="${commands[less]:-$PAGER}" \
        man "$@"
}

## ALIASES
### redirecting functionality
alias ls="exa --group-directories-first --git --extended -h"
alias la="exa --group-directories-first --git --extended -a"
alias l="exa --group-directories-first --grid --git --extended -lh"
alias ll="exa --group-directories-first --grid --git --extended -lah"
alias cat="bat"
alias rm="rm -ir"
alias lc="linx-client"
alias less="less -SR"
alias sbcl="rlwrap sbcl"
alias shen="rlwrap shen"
alias provedit="shen eval -l ~/src/lpc/provedit!.shen -e '(provedit!)'"
alias bitch="sudo"
alias svu="SVDIR=~/var/service sv" # 'sv user'
alias rsfetch="rsfetch -PdeHklcsuU@w -p xbps -L $HOME/.config/rsfetch_ascii"

### speed. i am. sspeed
alias t="tmux"
alias q="exit"
alias e="$VISUAL"
alias x="clear"
alias m="ncmpcpp"
alias rnb="toilet --gay -f future"
alias mtl="toilet --metal -f future"
alias rnt="toilet --gay -f term"

### literally just git.
### i have a problem.
alias g='git'

#### branching
alias gb='git branch'
alias gbc='git checkout -b'
alias gbd='git branch --delete'
alias gbD='git branch --delete --force'
alias gco='git checkout'
alias gm='git merge'

#### committing
alias gc='git commit --verbose'
alias gca='git commit --amend --reuse-message HEAD'
alias gcm='git commit --message'

#### fetching, pulling
alias gcl='git clone'
alias gcL='git clone --recurse-submodules'
alias gfm='git pull'

#### indexing, adding
alias gia='git add'
alias giA='git add -A'
alias gir='git reset'

#### log, status, diff, etc
alias gl='git log --topo-order'
alias gls='git log --topo-order --stat'
alias gld='git log --topo-order --stat --patch --full-diff'
alias glc='git shortlog --summary --numbered'
alias glS='git log --show-signature'
alias gd='git diff --no-ext-diff'
alias gD='git diff --no-ext-diff --word-diff'
alias gs='git status --short' # dont care about ghostscript
alias gS='git status'

#### push
alias gp='git push'
alias gpF='git push --force-with-lease'

#### rebase
alias gr='git rebase'
alias gra='git rebase --abort'
alias grc='git rebase --continue'
alias gri='git rebase --interactive'
alias grs='git rebase --skip'

#### remote
alias gR='git remote'
alias gRa='git remote add'
alias gRx='git remote rm'
alias gRm='git remote rename'
alias gRs='git remote set-url'
alias gRu='git remote update'
